<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Invitaci√≥n | Cumplea√±os de Nicolle</title>
  <meta name="description" content="Invitaci√≥n interactiva - Cumplea√±os de Nicolle" />
  <style>
    :root{
      --bg1:#140813;
      --bg2:#2a0f25;
      --rose:#ff6fb1;
      --roseSoft:#f5a3c7;
      --gold:#d8b15a;
      --goldSoft:#f6e2a6;
      --text:#fff6fb;
      --muted:#f8d7e8cc;
      --glass:#ffffff12;
      --stroke:#ffffff20;
      --shadow: 0 25px 70px rgba(0,0,0,.55);
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      min-height:100vh;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 700px at 15% 10%, #ff9fd11c 0%, transparent 55%),
        radial-gradient(900px 600px at 85% 20%, #ffd36f1a 0%, transparent 55%),
        radial-gradient(800px 600px at 50% 90%, #ff66b21a 0%, transparent 60%),
        linear-gradient(135deg, var(--bg1), var(--bg2));
      overflow-x:hidden;
    }

    canvas#env{
      position:fixed; inset:0;
      pointer-events:none;
      opacity:.95;
    }

    .wrap{ max-width: 900px; margin: 0 auto; padding: 28px 16px 70px; }

    header{
      display:flex;
      align-items:center;
      justify-content:center;
      margin-bottom:18px;
    }

    .chip{
      font-size:13px; color:var(--muted);
      padding:8px 12px; border-radius:999px;
      border:1px solid var(--stroke);
      background:#ffffff0b;
      white-space:nowrap;
    }

    /* === Card Flip === */
    .cardShell{
      perspective: 1400px;
      display:flex;
      justify-content:center;
    }

    .card{
      width: 100%;
      max-width: 820px;
      height: clamp(640px, 82vh, 880px);
      position:relative;
      border-radius:26px;
      transform-style:preserve-3d;
      transition: transform 900ms cubic-bezier(.2,.8,.2,1);
      box-shadow: var(--shadow);
    }

    .card.open{ transform: rotateY(-178deg); }

    .face{
      position:absolute; inset:0;
      border-radius:26px;
      overflow:hidden;
      backface-visibility:hidden;
      border:1px solid var(--stroke);
      background: linear-gradient(135deg, #ffffff10, #ffffff06);
    }

    .front{
      display:grid; place-items:center;
      padding:26px;
      background:
        radial-gradient(700px 420px at 10% 20%, #ffd36f1c, transparent 60%),
        radial-gradient(700px 420px at 90% 80%, #ff6fb11c, transparent 60%),
        linear-gradient(135deg, #ffffff14, #ffffff06);
    }

    .frame{
      width:min(560px, 100%);
      border-radius:22px;
      padding:26px 22px;
      background: linear-gradient(135deg, #140813b8, #2a0f25b8);
      border:1px solid var(--stroke);
      box-shadow: 0 0 0 1px #00000030 inset;
      position:relative;
    }

    .glow{
      position:absolute; inset:-2px;
      background: conic-gradient(from 180deg, var(--rose), var(--gold), var(--roseSoft), var(--goldSoft), var(--rose));
      filter: blur(18px);
      opacity:.22;
      z-index:-1;
      animation: spin 7s linear infinite;
    }
    @keyframes spin{ to{ transform: rotate(1turn); } }

    .kicker{
      display:inline-block;
      font-size:12px;
      letter-spacing:.18em;
      text-transform:uppercase;
      color:#ffeaf4;
      opacity:.9;
      padding:10px 12px;
      border-radius:999px;
      border:1px solid var(--stroke);
      background:#ffffff0b;
    }

    h1{
      margin:14px 0 6px;
      font-size:40px;
      line-height:1.05;
    }

    .name{
      background: linear-gradient(90deg, var(--rose), var(--goldSoft));
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
      font-weight:800;
    }

    .subtitle{ margin:0; color:var(--muted); font-size:15px; }

    .ctaRow{
      display:flex; flex-wrap:wrap; gap:10px;
      margin-top:18px;
    }

    .btn{
      appearance:none; border:0; cursor:pointer;
      border-radius:14px;
      padding:12px 14px;
      font-weight:650;
      color:var(--text);
      background:#ffffff10;
      border:1px solid var(--stroke);
      transition: transform .12s ease, background .12s ease;
      text-decoration:none;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:8px;
    }
    .btn:hover{ transform: translateY(-1px); background:#ffffff16; }
    .btn.primary{
      background: linear-gradient(135deg, #ff6fb133, #ffd36f33);
      border:1px solid #ffffff2a;
    }
    .btn.small{ padding:10px 12px; font-weight:600; }

    .hint{ margin-top:12px; color:#ffeaf4b3; font-size:13px; }

    /* BACK */
    .back{
      transform: rotateY(180deg);
      background:
        radial-gradient(900px 420px at 20% 0%, #ff6fb11c, transparent 60%),
        radial-gradient(900px 420px at 90% 100%, #ffd36f1c, transparent 60%),
        linear-gradient(135deg, #ffffff12, #ffffff06);
    }

    .inside{
      height:100%;
      overflow:auto;
      padding:22px;
      display:grid;
      grid-template-rows:auto auto 1fr auto;
      gap:14px;
      -webkit-overflow-scrolling: touch;
    }

    .count{
      display:flex; gap:10px; flex-wrap:wrap;
      margin-top:10px;
    }
    .pill{
      min-width:92px;
      border-radius:16px;
      padding:10px 12px;
      background: linear-gradient(135deg, #ffffff10, #ffffff06);
      border:1px solid var(--stroke);
      text-align:center;
    }
    .pill b{ display:block; font-size:22px; }
    .pill span{ display:block; font-size:12px; color:#ffeaf4bf; letter-spacing:.08em; text-transform:uppercase; }

    .grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
      align-content:start;
    }
    @media (max-width: 650px){
      .card{ height: clamp(720px, 88vh, 980px); }
      .grid{ grid-template-columns: 1fr; }
      h1{ font-size:34px; }
    }

    .panel{
      border-radius:18px;
      padding:14px 14px;
      background: #0f0710aa;
      border:1px solid #ffffff18;
    }
    .panel h3{
      margin:0 0 8px;
      font-size:13px;
      letter-spacing:.14em;
      text-transform:uppercase;
      color:#ffeaf4cc;
    }
    .panel p{ margin:0; font-size:16px; color:var(--text); }
    .panel .muted{ color:var(--muted); font-size:13px; margin-top:6px; line-height:1.35; }

    .panel.span2{ grid-column:1 / -1; }

    .helper{
      margin-top:8px;
      font-size:13px;
      color: var(--muted);
    }

    .peopleSelect{
      padding:10px 12px;
      border-radius:12px;
      border:1px solid #ffffff33;
      background:#120713dd;
      color:var(--text);
      font-size:14px;
      min-width:160px;
    }

    .peopleSelect:focus{
      outline:none;
      border-color:#ffd36f88;
      box-shadow:0 0 0 1px #ffd36f44;
    }

    .footRow{
      display:flex; flex-wrap:wrap;
      gap:10px; justify-content:space-between; align-items:center;
      padding-top:6px;
    }

    .note{ color:#ffeaf4c7; font-size:13px; }
  </style>
</head>

<body>
  <canvas id="env"></canvas>

  <div class="wrap">
    <header>
      <span class="chip" id="status">M√∫sica y sobres activos</span>
    </header>

    <section class="cardShell">
      <div class="card" id="card" aria-label="Tarjeta de invitaci√≥n">
        <!-- FRONT -->
        <div class="face front">
          <div class="frame">
            <div class="glow"></div>
            <span class="kicker">Cumplea√±os</span>
            <h1>De <span class="name">Nicolle</span></h1>
            <p class="subtitle">Toca para abrir la invitaci√≥n.</p>

            <div class="ctaRow">
              <button class="btn primary" id="openBtn">Abrir invitaci√≥n</button>
              <button class="btn" id="musicBtn" aria-pressed="true">M√∫sica: On</button>
              <button class="btn" id="rainBtn" aria-pressed="true">Sobres: On</button>
            </div>

            <div class="hint">Si no suena, toca una vez (pol√≠tica del navegador).</div>
          </div>
        </div>

        <!-- BACK -->
        <div class="face back">
          <div class="inside">
            <div>
              <span class="kicker">Est√°s invitad@</span>
              <h1 style="font-size:30px;margin:10px 0 6px;">
                Cumplea√±os de <span class="name">Nicolle</span>
              </h1>
              <p class="subtitle">14 de Febrero 2026 ‚Ä¢ 7:00 pm</p>

              <div class="count" aria-label="Cuenta regresiva">
                <div class="pill"><b id="d">--</b><span>D√≠as</span></div>
                <div class="pill"><b id="h">--</b><span>Horas</span></div>
                <div class="pill"><b id="m">--</b><span>Min</span></div>
                <div class="pill"><b id="s">--</b><span>Seg</span></div>
              </div>
            </div>

            <div class="grid">
              <div class="panel">
                <h3>Lugar</h3>
                <p id="placeText">Juancho's Pollo al Carbon</p>
                <p class="muted">Ac. 24 #75-75, Fontib√≥n, Bogot√°, Cundinamarca</p>
                <div class="ctaRow" style="margin-top:10px">
                  <a class="btn primary small" id="mapsBtn" href="https://maps.app.goo.gl/osmxA66UHJ4noHA99" target="_blank" rel="noopener">Ver en Maps</a>
                </div>
              </div>

              <div class="panel">
                <h3>Nota</h3>
                <p><b>Lluvia de sobres</b></p>
                <p class="muted">Tu presencia es lo m√°s importante.</p>
              </div>

              <!-- PANEL PERSONAS -->
              <div class="panel span2" id="peoplePanel">
                <h3>¬øCu√°ntos asistir√°n?</h3>
                <p class="muted">Incluy√©ndote. Esto se agregar√° al mensaje de WhatsApp.</p>
                <div class="ctaRow" style="margin-top:10px">
                  <select id="peopleSelect" class="peopleSelect">
                    <option value="1">1 persona</option>
                    <option value="2">2 personas</option>
                    <option value="3">3 personas</option>
                    <option value="4">4 personas</option>
                    <option value="5+">5 o m√°s personas</option>
                  </select>
                </div>
                <p class="helper" id="peopleStatus">Confirmar√°s para 1 persona.</p>
              </div>
              <!-- FIN PANEL PERSONAS -->

              <div class="panel" id="confirmPanel">
                <h3>Confirmar asistencia</h3>
                <p class="muted">Toca para enviar WhatsApp con el mensaje listo.</p>
                <div class="ctaRow" style="margin-top:10px">
                  <a class="btn primary small" id="waBtn" href="#" target="_blank" rel="noopener">Confirmar por WhatsApp</a>
                  <button class="btn small" id="copyBtn" type="button">Copiar mensaje</button>
                </div>
              </div>

              <div class="panel" id="dressPanel">
                <h3>Vestuario</h3>
                <p>Muy comodo pero lindos y lindas</p>
                <p class="muted"></p>
              </div>
            </div>

            <div class="footRow">
              <span class="note">Nicolle</span>
              <button class="btn small" id="closeBtn" type="button">Cerrar</button>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- M√∫sica: pon musica.mp3 en la misma carpeta -->
  <audio id="bgm" preload="auto" loop autoplay muted playsinline>
    <source src="musica.mp3" type="audio/mpeg">
  </audio>

<script>
  // ===== CONFIG =====
  const CONFIG = {
    celebrant: "Nicolle",
    dateISO: "2026-02-14T19:00:00-05:00",
    placeLabel: "Juancho's Pollo al Carbon",
    placeAddr: "Ac. 24 #75-75, Fontib√≥n, Bogot√°, Cundinamarca",
    mapsUrl: "https://maps.app.goo.gl/osmxA66UHJ4noHA99",
    whatsappNumber: "+573209852541",
  };

  // ===== Personas =====
  const peopleSelect = document.getElementById("peopleSelect");
  const peopleStatus = document.getElementById("peopleStatus");

  function readablePeople(v){
    if (v === "1")  return "1 persona";
    if (v === "5+") return "5 o m√°s personas";
    return v + " personas";
  }

  function buildWhatsAppLink() {
    const number = CONFIG.whatsappNumber.replace(/[^\d]/g, "");
    const people = peopleSelect.value || "1";

    const peopleLine = `\n\nüë• Asistir√°n: ${readablePeople(people)}`;

    const msg =
`¬°Hola! üéâ Confirmo mi asistencia al cumplea√±os de Nicolle

üìÖ Fecha: 14 de Febrero 2026
üïñ Hora: 7:00 pm
üìç Lugar: ${CONFIG.placeLabel}
${CONFIG.placeAddr}
üó∫Ô∏è Maps: ${CONFIG.mapsUrl}

üéÅ Nota: Lluvia de sobres${peopleLine}

¬°Gracias!`;

    return { url: `https://wa.me/${number}?text=${encodeURIComponent(msg)}`, msg };
  }

  // ===== Elements =====
  const card = document.getElementById("card");
  const statusChip = document.getElementById("status");
  const openBtn = document.getElementById("openBtn");
  const closeBtn = document.getElementById("closeBtn");

  const musicBtn = document.getElementById("musicBtn");
  const rainBtn  = document.getElementById("rainBtn");
  const bgm = document.getElementById("bgm");

  const dEl = document.getElementById("d");
  const hEl = document.getElementById("h");
  const mEl = document.getElementById("m");
  const sEl = document.getElementById("s");

  const mapsBtn = document.getElementById("mapsBtn");
  const waBtn = document.getElementById("waBtn");
  const copyBtn = document.getElementById("copyBtn");

  // Place + links
  mapsBtn.href = CONFIG.mapsUrl;

  // ===== WhatsApp wiring =====
  let waState = buildWhatsAppLink();
  waBtn.href = waState.url;

  peopleSelect.addEventListener("change", () => {
    const txt = readablePeople(peopleSelect.value);
    peopleStatus.textContent = "Confirmar√°s para " + txt + ".";
    waState = buildWhatsAppLink();
    waBtn.href = waState.url;
  });

  // Copiar mensaje
  copyBtn.addEventListener("click", async () => {
    try {
      await navigator.clipboard.writeText(waState.msg);
      copyBtn.textContent = "¬°Copiado!";
      setTimeout(() => copyBtn.textContent = "Copiar mensaje", 1200);
    } catch {
      alert("No pude copiar autom√°ticamente. Copia el texto manualmente.");
    }
  });

  // ===== Flip open/close (solo con botones) =====
  function openCard(){
    card.classList.add("open");
    statusChip.textContent = "¬°Nos vemos el 14!";
    try {
      bgm.muted = false;
      bgm.volume = 0.45;
      bgm.play().catch(()=>{});
    } catch {}
  }

  function closeCard(){
    card.classList.remove("open");
    statusChip.textContent = "M√∫sica y sobres activos";
  }

  openBtn.addEventListener("click", openCard);
  closeBtn.addEventListener("click", closeCard);

  // ===== Countdown =====
  const target = new Date(CONFIG.dateISO).getTime();
  function tick(){
    const now = Date.now();
    let diff = Math.max(0, target - now);
    const totalS = Math.floor(diff / 1000);
    const days = Math.floor(totalS / 86400);
    const hours = Math.floor((totalS % 86400) / 3600);
    const mins = Math.floor((totalS % 3600) / 60);
    const secs = totalS % 60;

    dEl.textContent = String(days).padStart(2,"0");
    hEl.textContent = String(hours).padStart(2,"0");
    mEl.textContent = String(mins).padStart(2,"0");
    sEl.textContent = String(secs).padStart(2,"0");
  }
  tick();
  setInterval(tick, 1000);

  // ===== Music ALWAYS ON (muted autoplay + unmute on first click) =====
  let musicOn = true;
  musicBtn.setAttribute("aria-pressed", "true");
  bgm.volume = 0.25;

  bgm.play().catch(()=>{});

  function setMusicState(on){
    musicOn = on;
    musicBtn.setAttribute("aria-pressed", String(on));
    musicBtn.textContent = "M√∫sica: " + (on ? "On" : "Off");
    if (!on){
      try { bgm.pause(); } catch {}
      return;
    }
    try {
      bgm.play().catch(()=>{});
    } catch {}
  }

  musicBtn.addEventListener("click", () => {
    if (musicOn){
      bgm.muted = true;
      setMusicState(false);
    } else {
      bgm.muted = false;
      bgm.volume = 0.35;
      setMusicState(true);
    }
  });

  document.addEventListener("click", () => {
    if (!musicOn) return;
    try {
      bgm.muted = false;
      bgm.volume = 0.35;
      bgm.play().catch(()=>{});
    } catch {}
  }, { once:true });

  // ===== Envelope rain (ALWAYS ON) =====
  const canvas = document.getElementById("env");
  const ctx = canvas.getContext("2d");
  function resize(){
    const dpr = Math.max(1, window.devicePixelRatio || 1);
    canvas.width = Math.floor(window.innerWidth * dpr);
    canvas.height = Math.floor(window.innerHeight * dpr);
    canvas.style.width = window.innerWidth + "px";
    canvas.style.height = window.innerHeight + "px";
    ctx.setTransform(dpr,0,0,dpr,0,0);
  }
  window.addEventListener("resize", resize);
  resize();

  let raining = true;
  rainBtn.setAttribute("aria-pressed", "true");
  rainBtn.textContent = "Sobres: On";

  let drops = [];
  function spawn(){
    const w = window.innerWidth;
    const h = window.innerHeight;
    const x = Math.random() * w;
    const y = -40 - Math.random() * h * 0.2;
    const s = 10 + Math.random() * 16;
    const v = 1.2 + Math.random() * 2.8;
    const rot = (Math.random() * 0.6 - 0.3);
    const hue = Math.random() < 0.55 ? "gold" : "rose";
    drops.push({x,y,s,v,rot,hue});
  }

  function drawEnvelope(x,y,s,rot,hue){
    ctx.save();
    ctx.translate(x,y);
    ctx.rotate(rot);

    const grad = ctx.createLinearGradient(-s, -s, s, s);
    if (hue === "gold"){
      grad.addColorStop(0, "rgba(246,226,166,.92)");
      grad.addColorStop(1, "rgba(216,177,90,.92)");
    } else {
      grad.addColorStop(0, "rgba(245,163,199,.92)");
      grad.addColorStop(1, "rgba(255,111,177,.92)");
    }

    ctx.fillStyle = grad;
    ctx.strokeStyle = "rgba(255,255,255,.55)";
    ctx.lineWidth = 1;

    ctx.beginPath();
    ctx.roundRect(-s, -s*0.65, s*2, s*1.3, 4);
    ctx.fill();
    ctx.stroke();

    ctx.beginPath();
    ctx.moveTo(-s, -s*0.65);
    ctx.lineTo(0, 0);
    ctx.lineTo(s, -s*0.65);
    ctx.closePath();
    ctx.fillStyle = "rgba(255,255,255,.18)";
    ctx.fill();
    ctx.stroke();

    ctx.strokeStyle = "rgba(20,8,19,.25)";
    ctx.beginPath();
    ctx.moveTo(-s, s*0.65);
    ctx.lineTo(0, 0);
    ctx.lineTo(s, s*0.65);
    ctx.stroke();

    ctx.restore();
  }

  function loop(){
    ctx.clearRect(0,0,window.innerWidth, window.innerHeight);

    if (raining){
      if (drops.length < 80 && Math.random() < 0.65) spawn();
    }

    for (const p of drops){
      p.y += p.v * 3;
      p.x += Math.sin(p.y*0.01) * 0.45;
      p.rot += 0.002;
      drawEnvelope(p.x, p.y, p.s, p.rot, p.hue);
    }

    drops = drops.filter(p => p.y < window.innerHeight + 80);
    requestAnimationFrame(loop);
  }
  loop();

  function setRainState(on){
    raining = on;
    rainBtn.setAttribute("aria-pressed", String(on));
    rainBtn.textContent = "Sobres: " + (on ? "On" : "Off");
  }

  rainBtn.addEventListener("click", () => setRainState(!raining));
</script>
</body>
</html>


